(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mys-login-yanzhengmalogin-yanzhengmalogin"],{"3fe2":function(e,t,n){e.exports=n.p+"static/img/wxlogin.73fbb928.png"},"4bf9":function(e,t,n){var i=n("f62e");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("df7d4150",i,!0,{sourceMap:!1,shadowMode:!1})},"8bd2":function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ac1f"),n("5319");var a=i(n("ade3")),o=getApp(),c=n("d3a9"),s={data:function(){var e;return e={imgUrl:o.globalData.imgUrl,checkbindphone:!1,bangdincode:"",guizeshow:!1,phone:null,code:null,smsState:!1,times:60,checkagree:!1,article_content:"",guizes:{article_title:""},columns:[],pickerShow:!1,bangdinphone:"",searchForm:{searchMatterEnumCode:852,searchMatterEnumName:"HongKong"}},(0,a.default)(e,"checkbindphone",!1),(0,a.default)(e,"defaultIndex",[0]),e},mounted:function(){this.guize(),this.getCountryQianZhui()},methods:{loginChange:function(){var e=this,t=this;uni.login({provider:"weixin",onlyAuthorize:!0,success:function(n){console.log(n);var i={code:n.code,tel_code:e.searchForm.searchMatterEnumCode};console.log(i),c.post("index.php?s=/api/user/loginwx&wxapp_id="+uni.getStorageSync("web_id"),i).then((function(e){if(1!=e.data.code)return uni.showToast({title:"授权失败",icon:"none",duration:2e3}),!1;uni.setStorageSync("token",e.data.data.token),t.gerenxinxi()}))}})},gerenxinxi:function(){var e=this,t={token:uni.getStorageSync("token")};c.get("index.php?s=/api/user/detail&wxapp_id="+uni.getStorageSync("web_id"),t).then((function(t){if(1==t.data.code){if((""==t.data.data.userInfo.mobile||0==t.data.data.userInfo.mobile)&&1==uni.getStorageSync("setting")["is_getphone"])return e.checkbindphone=!0,!1;uni.showToast({title:"登录成功",icon:"success",duration:2e3}),setTimeout((function(){uni.switchTab({url:"/pages/mine/mine"})}),1e3)}}))},bindphone:function(e){if(!e)return uni.showToast({title:"请输入手机号",icon:"none",duration:2e3}),!1;var t={token:uni.getStorageSync("token"),mobile:this.bangdinphone,smsCode:this.code};c.get("index.php?s=/api/user/changePhone&wxapp_id="+uni.getStorageSync("web_id"),t).then((function(e){1==e.data.code?(uni.showToast({title:e.data.msg,icon:"none",duration:2e3}),setTimeout((function(){uni.switchTab({url:"/pages/mine/mine"})}),1e3)):uni.showToast({title:e.data.msg,icon:"none",duration:2e3})}))},zhuce:function(){uni.navigateTo({url:"../zhuce/zhuce"})},phonelogin:function(){uni.navigateTo({url:"../login"})},pickerConfirm:function(e){console.log("点击确定",e),e.value.length&&(this.searchForm.searchMatterEnumCode=e.value[0].areanum,this.searchForm.searchMatterEnumName=e.value[0].cname),this.pickerShow=!1},getCountryQianZhui:function(){var e=this;c.get("index.php?s=/api/page/getCountryQianZhui&wxapp_id="+uni.getStorageSync("web_id"),{}).then((function(t){1==t.data.code&&(e.columns=t.data.data)}))},login:function(e,t){var n={mobile:this.phone,smsCode:this.code};c.post("index.php?s=api/passport/login&wxapp_id="+uni.getStorageSync("web_id"),n).then((function(e){1==e.data.code?(uni.setStorageSync("token",e.data.data.token),uni.showToast({title:"登录成功",icon:"success",duration:2e3}),setTimeout((function(){uni.switchTab({url:"/pages/mine/mine"})}),1e3)):uni.showToast({title:e.data.msg,icon:"none",duration:2e3})}))},getbangdinCode:function(){var e=this;if(!this.bangdinphone)return uni.showToast({title:"请输入手机号",icon:"none",duration:2e3}),!1;var t={form:{mobile:this.bangdinphone,tel_code:this.searchForm.searchMatterEnumCode,type:40}};console.log(t),c.post("index.php?s=/api/captcha/sendSmsCaptcha&wxapp_id="+uni.getStorageSync("web_id"),t).then((function(t){1==t.data.code&&e.timer()}))},getCode:function(){var e=this;if(!this.phone)return uni.showToast({title:"请输入手机号",icon:"none",duration:2e3}),!1;var t={form:{mobile:this.phone,tel_code:this.searchForm.searchMatterEnumCode,type:20}};c.post("index.php?s=/api/captcha/sendSmsCaptcha&wxapp_id="+uni.getStorageSync("web_id"),t).then((function(n){1==n.data.code?(console.log(t),e.timer()):uni.showToast({title:n.data.msg,icon:"none",duration:2e3})}))},timer:function(){var e=this;this.smsState=!0;var t=setInterval((function(){e.times=e.times-1,e.times<=0&&(e.smsState=!1,e.times=60,clearInterval(t))}),1e3)},jump:function(e){uni.navigateTo({url:e})},isguizeshows:function(){this.guizeshow=!1},guizeshows:function(){this.guizeshow=!0},guize:function(){var e=this,t={token:uni.getStorageSync("token")};c.post("index.php?s=/api/page/report_note&wxapp_id="+uni.getStorageSync("web_id"),t).then((function(t){if(1==t.data.code){var n=t.data.data.detail.article_content;n=n.replace(/<img/gi,'<img style="max-width:100%;height:auto;display:block" '),e.guizes=t.data.data.detail,e.article_content=n}}))}}};t.default=s},aa1a:function(e,t,n){e.exports=n.p+"static/img/account.4880dca7.png"},b081:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"logintitle"},[e._v("验证码登录")]),i("v-uni-image",{staticClass:"logo",attrs:{src:e.imgUrl+"icon2.png",mode:"aspectFit"}}),i("v-uni-view",{staticClass:"img_small"}),i("v-uni-view",{staticClass:"inputword"},[i("v-uni-view",{staticClass:"flex"},[i("v-uni-view",{staticStyle:{width:"65px","border-right":"1px solid #d9d9d9"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.pickerShow=!0}}},[e._v("+"+e._s(e.searchForm.searchMatterEnumCode)),i("u-picker",{attrs:{defaultIndex:e.defaultIndex,itemHeight:"100",columns:e.columns,showToolbar:!0,title:"手机号前缀",show:e.pickerShow,closeOnClickOverlay:!0,keyName:"ename",placeholder:"请输入手机号"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.pickerConfirm.apply(void 0,arguments)},cancel:function(t){arguments[0]=t=e.$handleEvent(t),e.pickerShow=!1}}})],1),i("v-uni-view",{staticClass:"phonecode"},[i("u--input",{attrs:{border:"none",placeholder:"请输入手机号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)],1),i("v-uni-view",{staticClass:"flex"},[i("u--input",{staticClass:"code",attrs:{placeholder:"请输入验证码",border:"none"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e.smsState?i("v-uni-text",{staticClass:"un-activate"},[e._v("重新发送("+e._s(e.times)+")秒")]):i("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getCode(e.phone)}}},[e._v("获取验证码")])],1),i("v-uni-view",{staticClass:"login",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.login(e.phone,e.code)}}},[e._v("登录")]),i("v-uni-view",{staticClass:"agree"},[i("v-uni-checkbox",{staticStyle:{transform:"scale(0.7)"},attrs:{color:"#F6C416",checked:e.checkagree}}),e._v("我已同意"),i("v-uni-text",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.guizeshows.apply(void 0,arguments)}}},[e._v("『用户隐私协议』")])],1),i("v-uni-view",{staticClass:"smallgray",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.zhuce.apply(void 0,arguments)}}},[e._v("没有账号,快速注册")]),i("v-uni-view",{staticClass:"logotwo"},[i("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.loginChange.apply(void 0,arguments)}}},[i("v-uni-image",{attrs:{src:n("3fe2"),mode:"aspectFit"}}),i("v-uni-text",[e._v("微信登录")])],1),i("v-uni-view",{staticStyle:{"margin-left":"50px"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.phonelogin.apply(void 0,arguments)}}},[i("v-uni-image",{attrs:{src:n("aa1a"),mode:"aspectFit"}}),i("v-uni-text",[e._v("手机号密码登录")])],1)],1)],1),e.guizeshow?i("v-uni-view",{staticClass:"baoguo_guize"},[i("v-uni-view",{staticClass:"baoguo_guize_banner"},[i("v-uni-view",{staticClass:"baoguo_guize_title"},[e._v("《"+e._s(e.guizes.article_title)+"》")]),i("v-uni-view",{},[i("v-uni-rich-text",{attrs:{nodes:e.article_content}})],1),i("v-uni-view",{staticClass:"baoguo_guize_btns",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.isguizeshows.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"baoguo_guize_btns_txt"},[e._v("我知道了")])],1)],1)],1):e._e(),e.checkbindphone?i("v-uni-view",{staticClass:"bangdindixlog"},[i("v-uni-view",{staticClass:"box"},[i("v-uni-view",{staticClass:"phonebangdin"},[e._v("绑定手机号")]),i("v-uni-view",{staticClass:"codebangdindixlog"},[i("v-uni-view",{staticStyle:{width:"65px","border-right":"1px solid #d9d9d9"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.pickerShow=!0}}},[e._v("+"+e._s(e.searchForm.searchMatterEnumCode)),i("u-picker",{attrs:{defaultIndex:e.defaultIndex,itemHeight:"100",columns:e.columns,showToolbar:!0,title:"手机号前缀",show:e.pickerShow,closeOnClickOverlay:!0,keyName:"ename",placeholder:"请输入手机号"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.pickerConfirm.apply(void 0,arguments)},cancel:function(t){arguments[0]=t=e.$handleEvent(t),e.pickerShow=!1}}})],1),i("v-uni-view",{staticClass:"phonecode"},[i("u--input",{attrs:{border:"none",placeholder:"请输入手机号"},model:{value:e.bangdinphone,callback:function(t){e.bangdinphone=t},expression:"bangdinphone"}})],1)],1),i("v-uni-view",{staticClass:"codebangdindixlog codeslide"},[i("u--input",{staticClass:"code",attrs:{placeholder:"请输入验证码"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e.smsState?i("v-uni-text",{staticClass:"un-activate"},[e._v("重新发送("+e._s(e.times)+")秒")]):i("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getbangdinCode(e.bangdinphone)}}},[e._v("获取验证码")])],1),i("v-uni-view",{staticClass:"btns"},[i("v-uni-view",{staticClass:"cancel",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.checkbindphone=!1,e.bangdinphone=""}}},[e._v("取消")]),i("v-uni-view",{staticClass:"surebangdin",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.bindphone(e.bangdinphone)}}},[e._v("绑定")])],1)],1)],1):e._e()],1)},a=[]},cbe3:function(e,t,n){"use strict";n.r(t);var i=n("8bd2"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},ea30:function(e,t,n){"use strict";n.r(t);var i=n("b081"),a=n("cbe3");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("f21a");var c=n("f0c5"),s=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"39533326",null,!1,i["a"],void 0);t["default"]=s.exports},f21a:function(e,t,n){"use strict";var i=n("4bf9"),a=n.n(i);a.a},f62e:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,".bangdindixlog[data-v-39533326]{width:100%;position:absolute;width:100%;height:100%;left:0;top:0;background:rgba(0,0,0,.3);z-index:4}.codebangdindixlog[data-v-39533326]{margin:15px 0;display:flex;align-items:flex-end;align-items:center;justify-content:space-between;padding:3px 20px!important;height:35px;overflow:hidden;background:#f0f0f0;border-radius:.920139rem;margin-top:10px}.phonecode[data-v-39533326]{width:72%}.codeslide[data-v-39533326]{display:flex;align-items:flex-end;align-items:center;justify-content:space-between;overflow:hidden;margin-top:10px}.codeslide uni-view[data-v-39533326]{margin-right:10px}.btns uni-view[data-v-39533326]{display:inline-block;font-weight:200;padding:4px 7px;color:#fff;border-radius:3px;background-color:#8f939c;border-width:1px;border-style:solid;border-color:#8f939c;margin-right:10px}.btns uni-view.surebangdin[data-v-39533326]{background-color:#f6c416;border-color:#f6c416;color:#000}.btns[data-v-39533326]{text-align:right}.box[data-v-39533326]{width:84%;position:absolute;bottom:30%;left:3%;z-index:5;background-color:#fff;padding:10% 5%;border-radius:6px}.phonebangdin[data-v-39533326]{font-size:16px}uni-page-body[data-v-39533326]{background-color:#fff}body.?%PAGE?%[data-v-39533326]{background-color:#fff}.baoguo_guize[data-v-39533326]{background:rgba(0,0,0,.5);width:100%;height:100%;position:fixed;top:0;left:0;z-index:100;display:flex;align-items:center;justify-content:center}.baoguo_guize_banner[data-v-39533326]{background:#fff;padding:%?20?% %?20?% 0 %?20?%;margin:%?30?%;border-radius:%?8?%;overflow:scroll;height:60vh}.baoguo_guize_cont[data-v-39533326]{font-size:%?32?%;line-height:%?45?%;margin-top:%?20?%;color:#333}.baoguo_guize_cont[data-v-39533326]:first-child{margin-top:0}.baoguo_guize_title[data-v-39533326]{font-size:%?36?%;color:#333;text-align:center;margin-bottom:%?30?%}.baoguo_guize_btns[data-v-39533326]{border-top:1px solid #e8e8e8;padding:%?30?%;margin-top:%?30?%}.baoguo_guize_btns_txt[data-v-39533326]{font-size:%?35?%;text-align:center}.baoguo_guize_list[data-v-39533326]{height:%?700?%;overflow-y:auto}uni-rich-text[data-v-39533326]{font-size:%?28?%;color:#333;line-height:%?50?%}.agree[data-v-39533326]{padding:20px 0;font-size:14px;color:#444}.agree uni-text[data-v-39533326]{color:#f6c416}.logotwo[data-v-39533326]{display:flex;align-items:center;justify-content:center;margin-top:40px}.logotwo uni-view[data-v-39533326]{text-align:center;font-size:12px;color:#666}.logotwo uni-image[data-v-39533326]{width:40px;display:block;height:40px;margin:0 auto 6px}.smallgray[data-v-39533326]{font-size:12px;color:#666;padding:10px 0 20px;text-align:center}.logintitle[data-v-39533326]{color:rgba(0,0,0,.8);margin:0;font-size:18px;padding:20px 0;text-align:center;font-weight:700}.logo[data-v-39533326]{width:48px;height:48px;display:block;margin:20px auto 10px}.img_small[data-v-39533326]{text-align:center;font-size:14px;color:#666}.input[data-v-39533326]{border:.104167rem solid #fff;height:35px;padding:3px 20px!important;overflow:hidden;background:#f0f0f0;transition:border .3s cubic-bezier(.4,0,.2,1) 0ms;border-radius:.920139rem;margin-top:30px}.inputword[data-v-39533326]{width:89%;margin:20px auto}.code[data-v-39533326]{width:60%}.flex[data-v-39533326]{display:flex;align-items:flex-end;align-items:center;justify-content:space-between;padding:3px 20px!important;height:35px;overflow:hidden;background:#f0f0f0;border-radius:.920139rem;margin-top:10px}.login[data-v-39533326]{\n\t/* width: 370px; */height:44px;margin:0 auto;margin-top:25px;text-align:center;line-height:44px;background:#f6c416;border-radius:106px 106px 106px 106px;opacity:1}",""]),e.exports=t}}]);